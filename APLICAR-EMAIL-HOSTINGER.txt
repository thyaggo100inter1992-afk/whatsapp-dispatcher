# ğŸ“§ CONFIGURAR EMAIL DA HOSTINGER - PASSO A PASSO

## âœ… INFORMAÃ‡Ã•ES NECESSÃRIAS:

Email: contato@nettsistemas.com (ou outro que vocÃª tenha)
Senha: [A SENHA DO EMAIL]
SMTP: smtp.hostinger.com
Porta: 587

---

## ğŸš€ APLICAR NO SERVIDOR (COPIE E COLE):

### PASSO 1: Conectar ao servidor
ssh root@72.60.141.244

### PASSO 2: Ir para a pasta do backend
cd /root/whatsapp-dispatcher/backend

### PASSO 3: Fazer backup do .env
cp .env .env.backup-$(date +%Y%m%d-%H%M%S)

### PASSO 4: Adicionar configuraÃ§Ãµes de email
cat >> .env << 'EOF'

# ==========================================
# EMAIL CONFIGURATION - HOSTINGER
# ==========================================
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=contato@nettsistemas.com
SMTP_PASS=SUA_SENHA_AQUI
EMAIL_FROM=contato@nettsistemas.com
EOF

### PASSO 5: Editar a senha (IMPORTANTE!)
nano .env

# Procure por SMTP_PASS=SUA_SENHA_AQUI
# Substitua SUA_SENHA_AQUI pela senha real do email
# Salve: Ctrl+O, Enter, Ctrl+X

### PASSO 6: Reiniciar servidor
pm2 restart whatsapp-backend

### PASSO 7: Verificar se funcionou
pm2 logs whatsapp-backend --lines 50 --nostream | grep -i "email"

# Deve aparecer:
# âœ… Email Service configurado: SMTP (smtp.hostinger.com)

---

## ğŸ§ª TESTAR ENVIO DE EMAIL:

### Criar script de teste:
cat > test-email.js << 'EOF'
const emailService = require('./dist/services/email.service').default;

async function test() {
  console.log('ğŸ§ª Testando envio de email da Hostinger...\n');
  console.log('Provedor:', emailService.getProvider());
  console.log('Configurado:', emailService.isReady());
  
  if (!emailService.isReady()) {
    console.log('\nâŒ Email service nÃ£o configurado!');
    process.exit(1);
  }
  
  // ALTERE PARA SEU EMAIL DE TESTE:
  const result = await emailService.sendEmail(
    'seu-email-pessoal@gmail.com',
    'ğŸ§ª Teste - Sistema Nett Sistemas',
    '<h1>âœ… Email da Hostinger Funcionando!</h1><p>O sistema estÃ¡ enviando emails corretamente.</p>'
  );
  
  if (result) {
    console.log('\nâœ… Email enviado com sucesso!');
  } else {
    console.log('\nâŒ Erro ao enviar email.');
  }
  
  process.exit(0);
}

test();
EOF

### Executar teste:
node test-email.js

---

## âš ï¸ TROUBLESHOOTING:

### Se der erro "Authentication failed":
1. Verifique se a senha estÃ¡ correta
2. Tente fazer login no webmail da Hostinger com a mesma senha
3. Se nÃ£o conseguir, resete a senha do email

### Se der erro "Connection timeout":
1. Verifique se a porta 587 estÃ¡ aberta no firewall
2. Tente com SMTP_PORT=465 e SMTP_SECURE=true

### Para ver logs detalhados:
pm2 logs whatsapp-backend --lines 200

---

## ğŸ“§ EMAILS QUE SERÃƒO ENVIADOS:

âœ… 3 dias antes do vencimento
âœ… 2 dias antes do vencimento  
âœ… 1 dia antes do vencimento
âœ… No momento do bloqueio (plano vencido)

Todos os emails vÃ£o sair de: contato@nettsistemas.com

